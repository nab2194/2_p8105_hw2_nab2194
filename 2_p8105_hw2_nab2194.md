Homework 2
================
Natalie Boychuk
September 27 2020

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

Read the Mr. Trashwheel dataset.

``` r
trashwheel_df = 
    read_xlsx(
        path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
        sheet = "Mr. Trash Wheel",
        range = cell_cols("A:N")) %>% 
    janitor::clean_names() %>% 
    drop_na(dumpster) %>% 
    mutate(
        sports_balls = round(sports_balls),
        sports_balls = as.integer(sports_balls)
    )
```

Read precipitation data for 2017/2018\!

``` r
precip_2018 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year) 

precip_2017 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year) 
```

Combine annual precipitation

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name 
  ) 

precip_df = 
  bind_rows(precip_2018, precip_2017) %>%  view

precip_df =
    left_join(precip_df, month_df, by = "month") 
```

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trashwheel collects that trash and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, including some
specific kinds of trash. There are a total of 344 rows in our final
dataset. Additional data sheets include month precipitation data. The
total precipitation in 2018 was 70.33 inches and the median number of
sports balls found in a dumpster in 2017 was 8.

## Problem 2

``` r
subway_df = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") 
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
  subway_df = janitor::clean_names(subway_df) %>%  
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entrance_type, entry, vending, ada) %>% 
    mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE")) %>% 
    mutate(entry = as.logical(entry))
```

``` r
clean_subway_df = subway_df %>% 
  mutate(route8 = as.character(route8),
         route9 = as.character(route9),
         route10 = as.character(route10),
         route11 = as.character(route11)
         ) %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_no",
    values_to = "route_name",
    names_prefix = "route"
    ) 

view(clean_subway_df)

clean_subway_df %>% 
  filter(ada == TRUE) %>% 
  distinct(station_name, line)
```

    ## # A tibble: 84 x 2
    ##    line            station_name                  
    ##    <chr>           <chr>                         
    ##  1 4 Avenue        Atlantic Av-Barclays Ctr      
    ##  2 4 Avenue        DeKalb Av                     
    ##  3 4 Avenue        Pacific St                    
    ##  4 42nd St Shuttle Grand Central                 
    ##  5 6 Avenue        34th St                       
    ##  6 6 Avenue        47-50th Sts Rockefeller Center
    ##  7 6 Avenue        Church Av                     
    ##  8 63rd Street     21st St                       
    ##  9 63rd Street     Lexington Av                  
    ## 10 63rd Street     Roosevelt Island              
    ## # … with 74 more rows

``` r
distinct(clean_subway_df, station_name, line)
```

    ## # A tibble: 465 x 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # … with 455 more rows

This dataset provides data on transit

There are a total of 455 distinct subway stations in NYC. Of those, 84
distinct stations are ADA compliant.

``` r
clean_subway_df %>% 
  filter(entry == "TRUE",
         vending == "NO")
```

    ## # A tibble: 759 x 10
    ##    line  station_name station_latitude station_longitu… entrance_type entry
    ##    <chr> <chr>                   <dbl>            <dbl> <chr>         <lgl>
    ##  1 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  2 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  3 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  4 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  5 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  6 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  7 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  8 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ##  9 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ## 10 4 Av… 9th St                   40.7            -74.0 Stair         TRUE 
    ## # … with 749 more rows, and 4 more variables: vending <chr>, ada <lgl>,
    ## #   route_no <chr>, route_name <chr>
